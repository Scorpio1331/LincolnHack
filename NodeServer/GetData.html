<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Trump tweets</title>
</head>
<body>
<div>
    <p id="tweets">
    
    </p>
</div>

   <script>
       
       function server() {
           xmlhttp = new XMLHttpRequest();
           xmlhttp.open("GET", "http://localhost:1337/gettweets", true);
           xmlhttp.onreadystatechange = function () {
               if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                   data = xmlhttp.responseText;
                   var tweetDataArray = JSON.parse(data);
                   //console.log((tweetDataArray))

                   var string = ""
                   

                   function getTweetDetails(tweet) {
                    var tweetString = ""
                    var hashtags = tweet.hashtags.hashtag_text;
                    var userData = "Alias: " + tweet.username + ", Profile Image URL: " + tweet.user_profile_image_url
                    var hashtagData = ""
                    for (var hashtagNum in hashtags) {
                        hashtagData += "#" + hashtags[hashtagNum] + "\n"
                    }
                    tweetString += userData + "\n" + hashtagData + "\n"
                       
                       return tweetString
                   }
                   
                   
                   document.getElementById("tweets").innerText += tweetDataArray.map((getTweetDetails));

                   
               }
           }
           xmlhttp.send();
       }
       window.onload = function () {
           server()
       }
   </script>

</body>
</html>